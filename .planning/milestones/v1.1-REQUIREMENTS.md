# Requirements Archive: v1.1 Forecast Screen

**Archived:** 2026-02-11
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: SolarEdge Off-Grid Monitor

**Defined:** 2026-02-07
**Core Value:** Show the homeowner their solar energy state at a glance on a physical e-ink display that's always up to date.

## v1.1 Requirements

Requirements for forecast screen milestone. Each maps to roadmap phases.

### Forecast API

- [x] **FCST-01**: App fetches today's production forecast (kWh) from Forecast.Solar API
- [x] **FCST-02**: App fetches tomorrow's production forecast (kWh) from Forecast.Solar API
- [x] **FCST-03**: Forecast responses are cached for 1 hour to stay within free tier rate limits (12 req/hour)
- [x] **FCST-04**: App gracefully handles Forecast.Solar API errors (network, rate limit) without crashing

### Configuration

- [x] **CONF-01**: User configures forecast via .env: FORECAST_LAT, FORECAST_LON, FORECAST_TILT, FORECAST_AZIMUTH, FORECAST_KWP
- [x] **CONF-02**: Forecast screen is only shown when all 5 forecast .env values are set (optional feature)

### Display

- [x] **DISP-01**: "Prognose, heute" screen shows today's forecast value (kWh) as the main number
- [x] **DISP-02**: Progress bar shows actual production vs forecast (e.g., "62% der Prognose erreicht")
- [x] **DISP-03**: Tomorrow's forecast shown in bottom breakdown area (e.g., "Morgen: 8.4 kWh")

### Documentation

- [ ] **DOCS-01**: README updated with forecast configuration and new screen screenshot
- [ ] **DOCS-02**: .env.example updated with forecast environment variables

## Future Requirements

Deferred to later milestones. Tracked but not in current roadmap.

### PowerFlow Display

- **FLOW-01**: Screen showing real-time power flow (PV → House, PV → Grid, Grid → House)
- **FLOW-02**: Display current watts (not daily kWh) for live power monitoring

### Additional Screens

- **SCRN-01**: SiteOverview screen showing lifetime production stats

## Out of Scope

| Feature | Reason |
|---------|--------|
| Paid Forecast.Solar tier | Free tier sufficient (today + tomorrow, 12 req/hour) |
| Solcast integration | Only 10 req/day on free tier — too restrictive |
| Weather data display | Forecast.Solar free tier doesn't include weather |
| Multi-day forecast chart | Free tier only provides today + tomorrow |
| Hourly forecast breakdown | Keep screen simple — daily totals only |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| FCST-01 | Phase 7 | Complete |
| FCST-02 | Phase 7 | Complete |
| FCST-03 | Phase 7 | Complete |
| FCST-04 | Phase 7 | Complete |
| CONF-01 | Phase 7 | Complete |
| CONF-02 | Phase 7 | Complete |
| DISP-01 | Phase 8 | Complete |
| DISP-02 | Phase 8 | Complete |
| DISP-03 | Phase 8 | Complete |
| DOCS-01 | Phase 9 | Pending |
| DOCS-02 | Phase 9 | Pending |

**Coverage:**
- v1.1 requirements: 11 total
- Mapped to phases: 11
- Unmapped: 0

---
*Requirements defined: 2026-02-07*
*Last updated: 2026-02-07 (Phase 8 requirements complete)*
